<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>WS Expo8</title>



    <!-- Estilo global Visonet -->
    <link rel="stylesheet" href="../styles/common.css" />
    <!-- Estilo específico do Expo8 -->
    <link rel="stylesheet" href="../styles/sty_expo8.css" />
  </head>

  <body>

    <div class="parser-container main-card expo8-container">
      <h2 class="parser-title">Parser - Exportação</h2>

      <div class="help-top-right">
      <button id="btnAjuda" class="btn-help" type="button" aria-label="Ajuda">
        ?
      </button>
    </div>

      <div class="section">
        <div class="section-title">Entrada de códigos de DUE</div>

        <div class="field-row">
          <input
            type="text"
            id="code-input"
            placeholder="Ex.: 25BR0006635014 | 25BR0006635014,25BR0006635015 | 25BR0006635014 25BR0006635015"
          />

          <button id="add-code-btn" class="primary" type="button">
            + Adicionar código
          </button>
        </div>

        <div class="hint">
          Você pode adicionar vários códigos; eles serão listados abaixo.
        </div>

        <div id="codes-list" class="codes-list"></div>
      </div>

      <div class="section">
        <div class="section-title">Pasta de saída</div>

        <div class="path-row">
          <input
            type="text"
            id="output-path-input"
            class="path-input"
            placeholder="Nenhum selecionado"
            readonly
          />

          <button
            id="choose-folder-btn"
            class="btn-icon"
            title="Selecionar saída"
            type="button"
          >
            <img
              class="btn-ico"
              src="../assets/icones/ic_folder-24-outline-white.svg"
              alt=""
              aria-hidden="true"
            />
          </button>
        </div>

        <div class="hint">
          A pasta será usada para salvar os relatórios gerados pelo parser.
        </div>

        <div class="section-title" style="margin-top: 16px;">Nome do relatório (opcional)</div>

        <div class="path-row">
          <input
            type="text"
            id="output-name-input"
            class="path-input"
            placeholder="Ex.: EXPO8_Dezembro_2025"
            autocomplete="off"
          />

          <button
            id="clear-output-name-btn"
            class="btn-icon"
            title="Limpar nome"
            type="button"
          >
            <span style="font-size:18px; line-height:1; color:#fff;">×</span>
          </button>
        </div>
        <div class="hint">Se vazio, o nome será gerado automaticamente.</div>


        <div class="actions">
          <button id="open-folder-btn" class="btn-primary" type="button">
            Abrir pasta de saída
          </button>
        </div>
      </div>

      <!-- Tipo de Parser -->
      <fieldset class="fieldset-parser">
        <legend>Tipo de Parser</legend>
        <label>
          <input type="radio" name="tipoParser" id="tipo-expo8" checked />
          EXPO8
        </label>
      </fieldset>

      <div class="footer-actions">
        <button id="run-parser-btn" class="primary" type="button">
          <img
            class="btn-ico-play"
            src="../assets/icones/ic_play-24-outline-white.svg"
            alt=""
            aria-hidden="true"
          />
          Executar Parser
        </button>
      </div>
    </div>

    <!-- MODAL DE CARREGAMENTO -->
    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="loading-box expo8-loading">
        <div class="spinner"></div>

        <p id="expo8-progress-message" class="expo8-progress-message">
          Gerando relatórios...
        </p>

        <p id="expo8-progress-count" class="expo8-progress-count">0 / 0</p>

        <div id="expo8-progress-wrap" class="expo8-progress-wrap">
          <div id="expo8-progress-fill" class="expo8-progress-fill"></div>
        </div>

        <button id="cancel-parser-btn" class="expo8-cancel-btn" type="button">
          Cancelar
        </button>
      </div>
    </div>

    <!-- MODAL AJUDA (VÍDEO) -->
    <div id="helpVideoModal" class="help-modal" style="display:none;">
      <div class="help-modal-content" role="dialog" aria-modal="true" aria-label="Ajuda - Vídeo">
        <button id="btnFecharAjuda" class="help-close" type="button" aria-label="Fechar ajuda">×</button>

        <h3 style="margin-top:0;">Como funciona esta tela</h3>

        <div class="help-video-wrap">
          <iframe
            id="helpVideoIframe"
            src=""
            title="Vídeo de ajuda"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
      </div>
    </div>


    <script src="../scripts/src_expo8.js"></script>
  </body>
</html>
