<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>WS VisoParser</title>
  <link rel="stylesheet" href="../styles/common.css" />
  <link rel="stylesheet" href="../styles/sty_visoparser.css" />
</head>
<body>

  <div class="main-card">
    <h2>WS VisoParser</h2>

    <!-- Caminhos -->
    <div class="path-row">
      <input id="entradaLabel" class="path-input" type="text" value="Nenhum selecionado" readonly />
      <button id="btnSelectEntrada" class="btn-icon" title="Selecionar entrada">ğŸ“</button>
    </div>
    <div class="hint"></div>

    <div class="path-row">
      <input id="saidaLabel" class="path-input" type="text" value="Nenhum selecionado" readonly />
      <button id="btnSelectSaida" class="btn-icon" title="Selecionar saÃ­da">ğŸ“</button>
    </div>

    <!-- BotÃµes extras -->
    <div class="actions">
      <button id="btnAbrir" class="btn-primary">Abrir pasta</button>
    </div>

    <!-- Tipo de parser -->
    <fieldset class="fieldset-parser">
      <legend>Tipo de Parser</legend>
      <label><input type="radio" name="parser" value="NFE" checked> NFE</label>
      <label><input type="radio" name="parser" value="IMPO1"> IMPO1</label>
      <label><input type="radio" name="parser" value="IMPO8"> IMPO8</label>
      <label><input type="radio" name="parser" value="SPED"> SPED</label>
      <label><input type="radio" name="parser" value="BASE"> BASE REINTEGRA</label>
    </fieldset>

    <!-- Controles -->
    <div class="buttons-bottom">
      <button id="btnSalvar" class="btn-secondary">Salvar como padrÃ£o</button>
      <button id="btnLimpar" class="btn-secondary">Limpar configuraÃ§Ãµes</button>
      <button id="btnIniciar" class="btn-executar">â–¶ï¸ Executar Parser</button>
    </div>

  </div>

  <!-- POPUP DE RESUMO -->
<div id="popupResumo" class="popup-resumo" style="display:none;">
  <div class="popup-content">
    <h3>Resumo da execuÃ§Ã£o</h3>
    <p><strong>Status:</strong> <span id="resStatus">â€”</span></p>
    <p><strong>InÃ­cio:</strong> <span id="resInicio">â€”</span></p>
    <p><strong>Fim:</strong> <span id="resFim">â€”</span></p>
    <p><strong>DuraÃ§Ã£o:</strong> <span id="resDuracao">â€”</span></p>
    <p><strong>Arquivos encontrados:</strong> <span id="resArq">â€”</span></p>
    <p><strong>Processados OK:</strong> <span id="resOk">â€”</span></p>
    <p><strong>Qtd. erros:</strong> <span id="resErros">â€”</span></p>

    <h4>Erros (se houver):</h4>
    <pre id="resListaErros">â€”</pre>

    <h4>Trecho do log:</h4>
    <pre id="resLog"></pre>

    <button id="btnFecharPopup" class="btn-secondary fechar">Fechar</button>
  </div>
</div>

<!-- MODAL DE CARREGAMENTO -->
<div id="loadingOverlay" class="loading-overlay" style="display:none;">
  <div class="loading-box">
    <p id="progressCount" class="progress-count">â€”/â€”</p>
    <div class="spinner"></div>
    <p id="loadingText">Iniciando parser...</p>

    <div class="progress-container">
      <div id="progressBar" class="progress-bar"></div>
    </div>

    <button id="btnCancelar" class="btn-secondary">Cancelar</button>
  </div>
</div>


<script defer src="../scripts/main.js"></script>
<script defer src="../scripts/router.js"></script>
<script defer src="../scripts/src_parser.js"></script>


</body>
</html>
